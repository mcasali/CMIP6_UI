{"version":3,"file":"leaflet-draw.directive.js","sources":["../../../src/leaflet-draw/core/leaflet-draw.directive.ts"],"names":[],"mappings":"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","sourcesContent":["import { Directive, EventEmitter, Input, NgZone, OnInit, Output } from '@angular/core';\n\nimport { Control, Draw, DrawEvents, drawLocal } from 'leaflet';\nimport 'leaflet-draw';\n\nimport { LeafletDirective, LeafletDirectiveWrapper, LeafletUtil } from '@asymmetrik/ngx-leaflet';\n\nimport { LeafletDrawUtil } from './leaflet-draw.util';\n\n@Directive({\n\tselector: '[leafletDraw]'\n})\nexport class LeafletDrawDirective\n\timplements OnInit {\n\n\tleafletDirective: LeafletDirectiveWrapper;\n\n\tdrawControl: Control.Draw;\n\n\t@Input('leafletDrawOptions') drawOptions: Control.DrawConstructorOptions = null;\n\n\t// Using 'any' here to avoid duplicating the DrawLocal interface with a bunch of optional properties\n\t@Input('leafletDrawLocal') drawLocal: any = null;\n\n\t// Configure callback function for the map\n\t@Output('leafletDrawReady') drawReady = new EventEmitter<Control.Draw>();\n\n\t// Draw Events\n\t@Output('leafletDrawCreated') onDrawCreated = new EventEmitter<DrawEvents.Created>();\n\t@Output('leafletDrawEdited') onDrawEdited = new EventEmitter<DrawEvents.Edited>();\n\t@Output('leafletDrawDeleted') onDrawDeleted = new EventEmitter<DrawEvents.Deleted>();\n\t@Output('leafletDrawStart') onDrawStart = new EventEmitter<DrawEvents.DrawStart>();\n\t@Output('leafletDrawStop') onDrawStop = new EventEmitter<DrawEvents.DrawStop>();\n\t@Output('leafletDrawVertex') onDrawVertex = new EventEmitter<DrawEvents.DrawVertex>();\n\t@Output('leafletDrawEditStart') onDrawEditStart = new EventEmitter<DrawEvents.EditStart>();\n\t@Output('leafletDrawEditMove') onDrawEditMove = new EventEmitter<DrawEvents.EditMove>();\n\t@Output('leafletDrawEditResize') onDrawEditResize = new EventEmitter<DrawEvents.EditResize>();\n\t@Output('leafletDrawEditVertex') onDrawEditVertex = new EventEmitter<DrawEvents.EditVertex>();\n\t@Output('leafletDrawEditStop') onDrawEditStop = new EventEmitter<DrawEvents.EditStop>();\n\t@Output('leafletDrawDeleteStart') onDrawDeleteStart = new EventEmitter<DrawEvents.DeleteStart>();\n\t@Output('leafletDrawDeleteStop') onDrawDeleteStop = new EventEmitter<DrawEvents.DeleteStop>();\n\t@Output('leafletDrawToolbarOpened') onDrawToolbarOpened = new EventEmitter<DrawEvents.ToolbarOpened>();\n\t@Output('leafletDrawToolbarClosed') onDrawToolbarClosed = new EventEmitter<DrawEvents.ToolbarClosed>();\n\t@Output('leafletDrawMarkerContext') onDrawMarkerContext = new EventEmitter<DrawEvents.MarkerContext>();\n\n\tconstructor(leafletDirective: LeafletDirective, private zone: NgZone) {\n\t\tthis.leafletDirective = new LeafletDirectiveWrapper(leafletDirective);\n\t}\n\n\tngOnInit() {\n\t\tthis.leafletDirective.init();\n\n\t\t// Configure localization options\n\t\tif(null != this.drawLocal) {\n\t\t\tLeafletDrawUtil.deepLiteralCopy(drawLocal, this.drawLocal);\n\t\t}\n\n\t\t// Create the control\n\t\tthis.drawControl =  new Control.Draw(this.drawOptions);\n\n\t\t// Add the control to the map\n\t\tthis.leafletDirective.getMap().addControl(this.drawControl);\n\n\t\t// Register the main handler for events coming from the draw plugin\n\t\tconst map = this.leafletDirective.getMap();\n\n\t\t// add draw event pass throughs\n\t\tmap.on(Draw.Event.CREATED, (e: any) => LeafletUtil.handleEvent(this.zone, this.onDrawCreated, e));\n\t\tmap.on(Draw.Event.EDITED, (e: DrawEvents.Edited) => LeafletUtil.handleEvent(this.zone, this.onDrawEdited, e));\n\t\tmap.on(Draw.Event.DELETED, (e: DrawEvents.Deleted) => LeafletUtil.handleEvent(this.zone, this.onDrawDeleted, e));\n\t\tmap.on(Draw.Event.DRAWSTART, (e: DrawEvents.DrawStart) => LeafletUtil.handleEvent(this.zone, this.onDrawStart, e));\n\t\tmap.on(Draw.Event.DRAWSTOP, (e: DrawEvents.DrawStop) => LeafletUtil.handleEvent(this.zone, this.onDrawStop, e));\n\t\tmap.on(Draw.Event.EDITSTART, (e: DrawEvents.EditStart) => LeafletUtil.handleEvent(this.zone, this.onDrawEditStart, e));\n\t\tmap.on(Draw.Event.EDITMOVE, (e: DrawEvents.EditMove) => LeafletUtil.handleEvent(this.zone, this.onDrawEditMove, e));\n\t\tmap.on(Draw.Event.EDITRESIZE, (e: DrawEvents.EditResize) => LeafletUtil.handleEvent(this.zone, this.onDrawEditResize, e));\n\t\tmap.on(Draw.Event.EDITVERTEX, (e: DrawEvents.EditVertex) => LeafletUtil.handleEvent(this.zone, this.onDrawEditVertex, e));\n\t\tmap.on(Draw.Event.EDITSTOP, (e: DrawEvents.EditStop) => LeafletUtil.handleEvent(this.zone, this.onDrawEditStop, e));\n\t\tmap.on(Draw.Event.DELETESTART, (e: DrawEvents.DeleteStart) => LeafletUtil.handleEvent(this.zone, this.onDrawDeleteStart, e));\n\t\tmap.on(Draw.Event.DELETESTOP, (e: DrawEvents.DeleteStop) => LeafletUtil.handleEvent(this.zone, this.onDrawDeleteStop, e));\n\t\tmap.on(Draw.Event.TOOLBAROPENED, (e: DrawEvents.ToolbarOpened) => LeafletUtil.handleEvent(this.zone, this.onDrawToolbarOpened, e));\n\t\tmap.on(Draw.Event.TOOLBARCLOSED, (e: DrawEvents.ToolbarClosed) => LeafletUtil.handleEvent(this.zone, this.onDrawToolbarClosed, e));\n\n\t\t// Notify others that the draw control has been created\n\t\tthis.drawReady.emit(this.drawControl);\n\t}\n\n\tngOnDestroy() {\n\t\tthis.leafletDirective.getMap().removeControl(this.drawControl);\n\t}\n\n\tpublic getDrawControl() {\n\t\treturn this.drawControl;\n\t}\n\n}\n"]}